---
## Front matter
lang: ru-RU
title: Лабораторная работа №8
subtitle: Модель конкуренции двух фирм
author:
  - Шестаков Д. С.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 1 апреля 2023

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
 - \usepackage{amsmath}
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Шестаков Дмитрий Сергеевич
  * студент НКНбд-01-20
  * Факультет физико-математических и естественных наук
  * Российский университет дружбы народов
  * [dmshestakov@icloud.com](mailto:dmshestakov@icloud.com)
  * <https://github.com/tekerinkin>

:::
::::::::::::::

# Вводная часть

## Актуальность

- Модель позволяет оценить изменение оборотных средств на счетах фирм и результаты их конкуренции
- Данная задача отлично подходит для отработки навыков решения дифференциальных уравнений второго порядка на языках Julia и Openmodelica

## Объект и предмет исследования

- Модель эффективности рекламы
- Язык программирования Julia
- Язык программирования Openmodelica


## Цели и задачи

- Программно реализовать модель конкуренции двух фирм
- Построить графики изменения оборотных средств двух фирм, математическая модель которых описывается следующими уравнениями
 
$$\frac{dM_{1}}{d\theta} = M_{1} - \frac{b}{c_{1}}M_{1}M_{2} - \frac{a_{1}}{c_{1}}M^{2}_{1}$$

$$\frac{dM_{2}}{d\theta} = \frac{c_{1}}{c_{2}}M_{2} - \frac{b}{c_{1}}M_{1}M_{2} - \frac{a_{2}}{c_{1}}M^{2}_{2}$$

## Материалы и методы

- Язык программирования Julia
- Язык программирования Modelica
- Пакеты Plots, DifferentialEquations

# Ход работы

## Постановка задачи

**Случай 1**. Рассмотрим две фирмы, производящие взаимозаменяемые товары одинакового качества и находящиеся в одной рыночной нише. Считаем, что в рамках нашей модели конкурентная борьба ведётся только рыночными методами. То есть, конкуренты могут влиять на противника путем изменения параметров своего
производства: себестоимость, время цикла, но не могут прямо вмешиваться в ситуацию на рынке («назначать» цену или влиять на потребителей каким-либо иным способом.) Будем считать, что постоянные издержки пренебрежимо малы, и в модели учитывать не будем. В этом случае динамика изменения объемов продаж фирмы 1 и фирмы 2 описывается следующей системой уравнений:

$$ \frac{dM_{1}}{d\theta} = M_{1} - \frac{b}{c_{1}}M_{1}M_{2} - \frac{a_{1}}{c_{1}}M^{2}_{1} $$

$$ \frac{dM_{2}}{d\theta} = \frac{c_{1}}{c_{2}}M_{2} - \frac{b}{c_{1}}M_{1}M_{2} - \frac{a_{2}}{c_{1}}M^{2}_{2} $$

## Постановка задачи

**Случай 2**. Рассмотрим модель, когда, помимо экономического фактора влияния (изменение себестоимости, производственного цикла, использование кредита и т.п.), используются еще и социально-психологические факторы – формирование общественного предпочтения одного товара другому, не зависимо от их качества и цены. В этом случае взаимодействие двух фирм будет зависеть друг от друга, соответственно коэффициент перед M1M2 будет отличаться. Пусть в
рамках рассматриваемой модели динамика изменения объемов продаж фирмы 1 и фирмы 2 описывается следующей системой уравнений:

$$ \frac{dM_{1}}{d\theta} = M_{1} - (\frac{b}{c_{1}} + 0,0007)M_{1}M_{2} - \frac{a_{1}}{c_{1}}M^{2}_{1} $$

$$ \frac{dM_{2}}{d\theta} = \frac{c_{1}}{c_{2}}M_{2} - \frac{b}{c_{1}}M_{1}M_{2} - \frac{a_{2}}{c_{1}}M^{2}_{2} $$


## Начальные условия

Для обоих случаев рассмотрим задачу со следующими начальными условиями и параметрами:
$$ M^{1}_{0} = 4.4, M^{2}_{0} = 4$$
$$ p_{cr} = 10.5, N = 28, q = 1$$
$$ \tau_{1} = 16, \tau_{2} = 25$$
$$ p_{1} = 7.2, p_{2} = 5.1$$


## Решение на Julia (случай №1)

```julia
function ode_fn_1(du, u, p, t)
    x,y = u 
    du[1] = x - (b/c1)*x*y - (a1/c1)*(x^2)
    du[2] = (c2/c1)*y - (b/c1)*x*y - (a2/c1)*(y^2)
end
init_val = [M1, M2]
t_begin = 0
t_end = 30
tspan = (t_begin, t_end)
prob = ODEProblem(ode_fn_1, init_val, tspan)
sol = solve(prob, Tsit5(), reltol=1e-16, abstol=1e-16)
x_sol = [u[1] for u in sol.u]
y_sol = [u[2] for u in sol.u]
```

## Решение на Julia (случай №2)

```julia
function ode_fn_2(du, u, p, t)
    x,y = u 
    du[1] = x - (b/c1 + 0.0007)*x*y - (a1/c1)*(x^2)
    du[2] = (c2/c1)*y - (b/c1)*x*y - (a2/c1)*(y^2)
end
init_val = [M1, M2]
t_begin = 0
t_end = 30
tspan = (t_begin, t_end)
prob1 = ODEProblem(ode_fn_2, init_val, tspan)
sol1 = solve(prob1, Tsit5(), reltol=1e-16, abstol=1e-16)
x_sol_1 = [u[1] for u in sol1.u]
y_sol_1 = [u[2] for u in sol1.u]
```

## Графики

:::::::::::::: {.columns align=center}
::: {.column width="50%"}
![Графики изменения оборотных средств в первом случае №1(Julia)](../report/image/1(Julia).png){#fig:001 width=70%}
:::
::: {.column width="50%"}
![Графики изменения оборотных средств в первом случае №2(Julia)](../report/image/2(Julia).png){#fig:002 width=70%}
:::
::::::::::::::
## Решение на языке Openmodelica (случай №1)

```openmodelica
model Concurrency
  Real m1, m2, t;
initial equation
  t = 0;
  m1 = 4.4;
  m2 = 4;
equation
  der(t) = 1;
  der(m1) = m1 - ((10.5*16*7.2)/((3.3)*16*16*7.2*7.2*25*25*5.1*5.1*28))*m1*m2 
      - ((10.5*16*7.2)/(3.3*16*16*7.2*7.2*28))*m1*m1;
  der(m2) = ((5.4*16*7.2)/(3.3*25*5.1))*m2 - ((10.5*16*7.2)/((3.3)*16*16*7.2*7.2*25*25*5.1*5.1*28))*m1*m2 
        - ((10.5*16*7.2)/(3.3*25*25*5.1*5.1*28))*m2*m2;
end Concurrency;
```
## Решение на языке Openmodelica (случай №2)

```openmodelica
model Concurrency
  Real m1, m2, t;
initial equation
  t = 0;
  m1 = 4.4;
  m2 = 4;
equation
  der(t) = 1;
  der(m1) = m1 - ((10.5*16*7.2)/((3.3)*16*16*7.2*7.2*25*25*5.1*5.1*28) + 0.0007)*m1*m2 
      - ((10.5*16*7.2)/(3.3*16*16*7.2*7.2*28))*m1*m1;
  der(m2) = ((5.4*16*7.2)/(3.3*25*5.1))*m2 - ((10.5*16*7.2)/((3.3)*16*16*7.2*7.2*25*25*5.1*5.1*28))*m1*m2 
      - ((10.5*16*7.2)/(3.3*25*25*5.1*5.1*28))*m2*m2;
end Concurrency;
```

## Графики

:::::::::::::: {.columns align=center}
::: {.column width="50%"}
![Графики изменения оборотных средств в первом случае №1(OM)](../report/image/1(OM).png){#fig:004 width=50%}
:::
::: {.column width="50%"}
![Графики изменения оборотных средств в первом случае №2(OM)](../report/image/2(OM).png){#fig:005 width=50%}
:::
::::::::::::::

# Вывод

- Программно реализовали модель конкуренции двух фирм на языках программирования Julia и Openmodelica.
- Построили графики изменения оборотных средств фирм, математическая модель которых описывается следующими уравнениями

$$\frac{dM_{1}}{d\theta} = M_{1} - \frac{b}{c_{1}}M_{1}M_{2} - \frac{a_{1}}{c_{1}}M^{2}_{1}$$

$$\frac{dM_{2}}{d\theta} = \frac{c_{1}}{c_{2}}M_{2} - \frac{b}{c_{1}}M_{1}M_{2} - \frac{a_{2}}{c_{1}}M^{2}_{2}$$